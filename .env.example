# ============================================
# Kreuzberg Batch Processor Configuration
# ============================================
# Copy this file to .env and modify as needed

# ===========================================
# Watch Settings
# ===========================================
# Interval between directory scans (seconds)
WATCH_INTERVAL=30

# Number of concurrent processing jobs
CONCURRENT_JOBS=4

# Enable recursive folder processing
RECURSIVE=true

# ===========================================
# Output Settings
# ===========================================
# Output format: markdown | json | text
OUTPUT_FORMAT=markdown

# Add timestamp to output filenames (folder_20260122_153045)
ADD_TIMESTAMP=true

# Skip files that have already been processed (based on hash)
SKIP_EXISTING=true

# Preserve input folder structure in output
PRESERVE_STRUCTURE=true

# Hash file for tracking processed files
HASH_FILE=.processed.json

# ===========================================
# URL Fetching - Layer 1: Native Fetch
# ===========================================
# Enable URL fetching from urls.txt
FETCH_URLS=true

# File containing URLs to fetch (one per line)
URL_FILE=urls.txt

# Timeout for native fetch (milliseconds)
FETCH_TIMEOUT=30000

# User agent for requests
USER_AGENT=Mozilla/5.0 (compatible; KreuzbergBot/1.0)

# ===========================================
# URL Fetching - Layer 2: Playwright
# ===========================================
# Enable Playwright as fallback for JS-rendered pages
PLAYWRIGHT_ENABLED=true

# Wait for page to be fully loaded (milliseconds)
PLAYWRIGHT_WAIT=5000

# Playwright timeout (milliseconds)
PLAYWRIGHT_TIMEOUT=60000

# ===========================================
# URL Fetching - Layer 3: Browserless
# ===========================================
# Enable Browserless as final fallback
BROWSERLESS_ENABLED=true

# Browserless service URL (set by docker-compose)
BROWSERLESS_URL=http://browserless:3000

# Browserless API token (optional, for security)
BROWSERLESS_TOKEN=

# Max concurrent browser sessions
BROWSERLESS_MAX_SESSIONS=5

# Connection timeout (milliseconds)
BROWSERLESS_TIMEOUT=60000

# Expose browserless port (for debugging)
BROWSERLESS_PORT=3000

# ===========================================
# Error Handling
# ===========================================
# Maximum retry attempts before moving to error folder
MAX_RETRIES=3

# Delay between retries (milliseconds)
RETRY_DELAY=5000

# ===========================================
# Kreuzberg Extraction Settings
# ===========================================
# Path to kreuzberg config file
KREUZBERG_CONFIG=/config/kreuzberg.toml

# Maximum upload size (MB)
KREUZBERG_MAX_UPLOAD_SIZE_MB=500

# Log level: error | warn | info | debug | trace
RUST_LOG=info

# Enable OCR for images and scanned PDFs
OCR_ENABLED=true

# Force OCR even if PDF has embedded text (extract text from images too)
FORCE_OCR=false

# OCR language (tesseract format: eng, fra, deu, etc.)
OCR_LANGUAGE=eng

# Enable quality processing (clean OCR artifacts, navigation, etc.)
QUALITY_PROCESSING=true

# ===========================================
# Logging
# ===========================================
# Log level for the batch processor
LOG_LEVEL=info

# Enable verbose logging
VERBOSE=false
